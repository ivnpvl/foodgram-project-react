Foodgram
========

Проект «Фудграм» — сайт, на котором пользователи могут публиковать рецепты, добавлять чужие рецепты в избранное и подписываться на публикации других авторов.

## Описание

«Фудграм» полезен для тех, кто интересуется кулинарией и ищет интересные рецепты.    
Новые рецепты всегда отображаются на первой странице благодаря чему пользователи всегда видят новый контент.  
«Фудграм» можно использовать как кулинарную книгу благодаря удобному добавлению рецептов в избранное.  
Пользователи могут искать необходимые рецепты по соответствующим тэгам, что позволяет выбрать блюдо для подходящего случая.  
Опция подписки позволяет видеть все рецепты понравившегося автора в отдельном блоке, что дополнительно упрощает поиск.  
Сервис «список покупок» позволяет в один клик создавать список продуктов, которые нужно купить для приготовления выбранных блюд.

## Технические особенности

Проект представляет собой фронтэнд SPA на React и бэкенд приложение на Django с использованием django rest framework.  
Для маршрутизации используется nginx сервер.  
Проект запущен в Docker-контейнерах через docker compose.  
Статика и медиа подгружаются из volumes.

## Запуск на удалённом сервере

- установите Docker и Docker Compose на Ubuntu-сервер:
```
sudo apt update
sudo apt install curl
curl -fSL https://get.docker.com -o get-docker.sh
sudo sh ./get-docker.sh
sudo apt-get install docker-compose-plugin 
```
- создайте директорию проекта;
- в корне проекта создайте файл ```.env```, укажите необходимые переменные по образцу ```.env.example```;
- в корень проекта копируйте директорию ```infra/```;
- из директории ```infra/``` заустите Docker Compose в режиме демона:
```
sudo docker compose up -d
```
- соберите статику в контейнере с бэкендом, копируйте статику в используемый volume:
```
collectstatic
sudo docker compose exec backend cp -r /app/collected_static/. /app/static/ 
```
- выполните миграции:
```
sudo docker compose exec backend python manage.py makemigrations
sudo docker compose exec backend python manage.py migrate
```
- по желанию в базу можно загрузить готовый список ингредиентов:
```
sudo docker compose exec backend python manage.py import_ingredients
```

## API

Для доступа к бэкэнду доступны следующие эндпоинты:

- ```/api/users/``` GET: получение списка пользователей, POST: регистрация нового пользователя;

- ```/api/users/{id}``` GET: персональная страница пользователя с указанным id;

- ```/api/users/me/``` GET: страница текущего пользователя;

- ```/api/users/set_password``` POST: изменение пароля;

- ```/api/auth/token/login/``` POST: получение токена авторизации по емейлу и паролю;

- ```/api/auth/token/logout/``` POST: удаление токена;

- ```/api/tags/``` GET: получение списка тегов;

- ```/api/tags/{id}``` GET: получение информации о теге по id;

- ```/api/ingredients/``` GET: получение списка всех ингредиентов;

- ```/api/ingredients/{id}/``` GET: получение информации об ингредиенте по id;

- ```/api/recipes/``` GET: получение списка всех рецептоd, POST: добавление нового рецепта;

- ```/api/recipes/{id}/``` GET: получение информации о рецепте по id, PATCH: изменение собственного рецепта, DELETE: удаление собственного рецепта;

- ```/api/recipes/{id}/favorite/``` POST: добавление рецепта в избранное; DELETE: удаление рецепта из избранного;

- ```/api/recipes/{id}/shopping_cart/``` POST: добавление рецепта в список покупок; DELETE: удаление рецепта из списка покупок;

- ```/api/recipes/download_shopping_cart/``` GET: получение текстового файла со списком покупок;

- ```/api/users/{id}/subscribe/``` POST: подписка на пользователя с указанным id, DELETE: отписка от пользователя с указанным id;

- ```/api/users/subscriptions/``` GET: получение списка пользователей, на которых подписан текущий пользователь.

Подробно ознакомиться со всеми возможностями бэкенда и посмотреть примеры запросов можно в документации:  (https://instafood.hopto.org/api/docs/)


## Автор

Иван Павлов, ivnpvl@mail.ru
